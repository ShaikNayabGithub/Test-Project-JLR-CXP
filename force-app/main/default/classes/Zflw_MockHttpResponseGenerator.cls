/* *************************************************************************************************************    
Class Name    : Zflw_MockHttpResponseGenerator for brcheckout

Description   : This class is used for testing functionality of 
BRCheckoutController 
CreatedDate   : 27 Mar 2019         
Version       : 1.0     
Author        : TCS
-----------------------  Revision History -------------------

Sno      Version      Modification Done                                 Modified By            Modified Date
1        1.0          Initial Version                                                

***************************************************************************************************************** */
@isTest
global class Zflw_MockHttpResponseGenerator implements HttpCalloutMock {
    
    // Implement this interface method
    global HTTPResponse respond(HTTPRequest req) {
       string transactionId = '456';
       string str1 = 'https://accounts.zflow.com.br/auth/realms/zflow/protocol/openid-connect/token';
       string str2 = 'https://financeapi.zflow.com.br/transaction';
      
        // Create a fake response
        HttpResponse res = new HttpResponse();
        res.setHeader('Content-Type', 'application/json');
        
        system.debug('req'+req);
        
        if(req.getEndpoint() ==str1){
         res.setBody('{"access_token":"test"}');
        }
        
         if(req.getEndpoint() == str2){
          res.setBody('{"financeTransaction":{"id":"a05fbbb6-dac2-4caf-a21b-e1e5fcc6a9da","owner":"01d0800e-f388-4e58-9e66-d02cfe8e74e8","oauthClient":"jaguar-integration-staging","preAnalysis":{"cpf":30030030030,"preAnalysed":false,"operationNotAccepted":false,"client":false,"serviceUnavailable":false},"client":{"cpf":30030030030,"name":"João Antônio"}}}');
         }
         
         if(req.getEndpoint().contains('completefinancetransaction')){
          res.setBody( '{"financeTransaction":{"id":"a05fbbb6-dac2-4caf-a21b-e1e5fcc6a9da","owner":"01d0800e-f388-4e58-9e66-d02cfe8e74e8","oauthClient":"jaguar-integration-staging","preAnalysis":{"cpf":30030030030,"preAnalysed":false,"operationNotAccepted":false,"client":false,"serviceUnavailable":false},"client":{"cpf":30030030030,"name":"João Antônio Silva","email":"joao.antonio@email.com","identityDocuments":[],"personalPhones":[],"paymentOption":"ACCOUNT_DEBIT","debitAccount":{"bankCode":"BANCOITAU","bankNumber":"0341"}},"operationRequest":{"vehicleSellerRebatePercent":3,"vehicleSellerDocument":2215837000183,"vehicleMake":"JAGUAR","vehicleModel":"XE R-SPORT 250 2.0 GTDi 4P","vehicleModelYear":2019,"vehicleManufactureYear":2018,"vehicleMolicarCode":"02302105-6","vehicleValue":248400,"upfrontValue":200000,"iofFree":false,"icmsFree":false,"ipiFree":false,"specialFinancePlan":false,"newVehicle":true,"shielded":false,"financeProtectionInsurance":false,"financeOperationType":"DEFINED","fromSuggestion":false,"vehicleModelNeedsConfirmation":false,"directSale":false},"lastSimulation":{"vehicleSellerRebatePercent":3,"vehicleSellerDocument":2215837000183,"vehicleMake":"JAGUAR              ","vehicleModel":"XE R-SPORT 250 2.0 GTDI G4B   ","vehicleModelYear":2019,"vehicleManufactureYear":2018,"vehicleMolicarCode":"02302105-6","vehicleValue":248400,"upfrontValue":200000,"installments":48,"installmentsHash":1154194340,"iofFree":false,"icmsFree":false,"ipiFree":false,"specialFinancePlan":false,"newVehicle":true,"shielded":false,"financeProtectionInsurance":false,"financeOperationType":"DEFINED","fromSuggestion":false,"vehicleModelNeedsConfirmation":false,"directSale":false,"financeOperationOptions":[{"installments":6,"installmentsHash":1175051100,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":1.96,"combinedNominalInterest":1.96,"vehicleInstallmentValue":8822.81,"financeInsuranceInstallmentValue":85.29004,"iofValue":633.08,"iofValueWithInsurance":639.14,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.6216805,"combinedAnnuallyEffectiveInterest":36.54194,"subsidy":false,"highChanceOfApproval":false},{"installments":9,"installmentsHash":1170099579,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":2,"combinedNominalInterest":2,"vehicleInstallmentValue":6089.67,"financeInsuranceInstallmentValue":58.879883,"iofValue":832.93,"iofValueWithInsurance":840.9,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.5612414,"combinedAnnuallyEffectiveInterest":35.486816,"subsidy":false,"highChanceOfApproval":false},{"installments":12,"installmentsHash":1167308933,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":2.02,"combinedNominalInterest":2.02,"vehicleInstallmentValue":4727.05,"financeInsuranceInstallmentValue":45.699707,"iofValue":1038.45,"iofValueWithInsurance":1048.39,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.5303438,"combinedAnnuallyEffectiveInterest":34.949303,"subsidy":false,"highChanceOfApproval":false},{"installments":18,"installmentsHash":1162897726,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":1.95,"combinedNominalInterest":1.95,"vehicleInstallmentValue":3334.57,"financeInsuranceInstallmentValue":32.23999,"iofValue":1290.98,"iofValueWithInsurance":1303.34,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.3707561,"combinedAnnuallyEffectiveInterest":32.43184,"subsidy":false,"highChanceOfApproval":false},{"installments":24,"installmentsHash":1160036383,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":1.91,"combinedNominalInterest":1.91,"vehicleInstallmentValue":2636,"financeInsuranceInstallmentValue":25.48999,"iofValue":1416.77,"iofValueWithInsurance":1430.33,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.2635684,"combinedAnnuallyEffectiveInterest":30.763744,"subsidy":false,"highChanceOfApproval":false},{"installments":30,"installmentsHash":1158485719,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":2.01,"combinedNominalInterest":2.01,"vehicleInstallmentValue":2257.42,"financeInsuranceInstallmentValue":21.830078,"iofValue":1495.2,"iofValueWithInsurance":1509.51,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.3204033,"combinedAnnuallyEffectiveInterest":31.64345,"subsidy":false,"highChanceOfApproval":false},{"installments":36,"installmentsHash":1157050727,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":1.98,"combinedNominalInterest":1.98,"vehicleInstallmentValue":1977.54,"financeInsuranceInstallmentValue":19.119995,"iofValue":1544.38,"iofValueWithInsurance":1559.15,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.2551305,"combinedAnnuallyEffectiveInterest":30.63947,"subsidy":false,"highChanceOfApproval":false},{"installments":42,"installmentsHash":1155406428,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":1.95,"combinedNominalInterest":1.95,"vehicleInstallmentValue":1776.82,"financeInsuranceInstallmentValue":17.179932,"iofValue":1578.81,"iofValueWithInsurance":1593.91,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.198167,"combinedAnnuallyEffectiveInterest":29.774517,"subsidy":false,"highChanceOfApproval":false},{"installments":48,"installmentsHash":1154194340,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":1.93,"combinedNominalInterest":1.93,"vehicleInstallmentValue":1628.86,"financeInsuranceInstallmentValue":15.75,"iofValue":1604.31,"iofValueWithInsurance":1619.67,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.1573062,"combinedAnnuallyEffectiveInterest":29.154644,"subsidy":false,"highChanceOfApproval":false},{"installments":50,"installmentsHash":1153873705,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":1.93,"combinedNominalInterest":1.93,"vehicleInstallmentValue":1589.72,"financeInsuranceInstallmentValue":15.369995,"iofValue":1611.53,"iofValueWithInsurance":1626.95,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.1515543,"combinedAnnuallyEffectiveInterest":29.069065,"subsidy":false,"highChanceOfApproval":false},{"installments":60,"installmentsHash":1152526695,"vehicleSellerRebatePercent":3,"accessorySellerRebatePercent":0,"vehicleNominalInterest":1.9,"combinedNominalInterest":1.9,"vehicleInstallmentValue":1425.29,"financeInsuranceInstallmentValue":13.779907,"iofValue":1639.09,"iofValueWithInsurance":1654.78,"insuranceValue":471.93,"combinedMonthlyEffectiveInterest":2.0970833,"combinedAnnuallyEffectiveInterest":28.248608,"subsidy":false,"highChanceOfApproval":false}],"financeOperationSpecialOptions":[{"installments":36,"installmentsHash":-541366134,"specialPlanDistribution":[{"quantity":35,"value":1294.5657,"installments":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]},{"quantity":1,"value":20990.318,"installments":[36]}],"vehicleNominalInterest":1.19,"combinedNominalInterest":1.19,"vehiclePaymentFlow":[1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,1294.5657,20990.318],"subsidy":false,"highChanceOfApproval":false,"name":"access"},{"installments":42,"installmentsHash":-999662020,"specialPlanDistribution":[{"quantity":41,"value":668.7613,"installments":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]},{"quantity":1,"value":35146.58,"installments":[42]}],"vehicleNominalInterest":0.66,"combinedNominalInterest":0.66,"vehiclePaymentFlow":[668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,668.7613,35146.58],"subsidy":true,"highChanceOfApproval":false,"name":"access"},{"installments":24,"installmentsHash":1435723770,"specialPlanDistribution":[{"quantity":23,"value":1770.0208,"installments":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]},{"quantity":1,"value":20990.318,"installments":[24]}],"vehicleNominalInterest":1.29,"combinedNominalInterest":1.29,"vehiclePaymentFlow":[1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,1770.0208,20990.318],"subsidy":false,"highChanceOfApproval":false,"name":"access"}],"registerRate":198,"propertyValuationRate":0,"contractRecordRate":216.69,"vehicleReferenceValue":303400,"ratesPaymentType":"INCLUDED","executionTime":994,"creditAnalysisNotAllowed":false,"realSimulationForm":"CORBAN_BANK","maxAccessoryValue":9936,"accessoryPackOffers":[{"description":"Icatu seguros","value":750,"accessoryPackId":"5ffc8d18-4c02-474f-825e-8b8b4275db39","estimatedInstallmentValues":{"6":150.03,"9":107.685005,"12":86.82,"18":66.284996,"24":56.385002,"30":50.745003,"36":47.234997,"42":44.925,"48":43.35,"50":42.93,"60":41.46}},{"description":"Financiamento de acessórios","value":1500,"accessoryPackId":"442a538d-0be8-47d8-ad7d-e2ab14db2897","estimatedInstallmentValues":{"6":300.06,"9":215.37001,"12":173.64,"18":132.56999,"24":112.770004,"30":101.490005,"36":94.46999,"42":89.85,"48":86.7,"50":85.86,"60":82.92}},{"description":"Ofereça acessórios e serviços","value":800,"accessoryPackId":"dbdfe755-0d2d-4e2f-95b4-4da942ac2e91","estimatedInstallmentValues":{"6":160.032,"9":114.864006,"12":92.608,"18":70.703995,"24":60.144,"30":54.128002,"36":50.383995,"42":47.920002,"48":46.239998,"50":45.792,"60":44.224}},{"description":"ConectCar","value":800,"accessoryPackId":"8d687a3d-7e9c-4079-bfdb-7b69fd7dbde5","estimatedInstallmentValues":{"6":160.032,"9":114.864006,"12":92.608,"18":70.703995,"24":60.144,"30":54.128002,"36":50.383995,"42":47.920002,"48":46.239998,"50":45.792,"60":44.224}}],"optionInternals":{"IDTPPLNL":"2","ESPECIAL":"N","SUBSIDIO":"N","CDPLTXA":"012274072","IDTPPLNA":"2","CDCOMISL":"CQZ0","CDPLTXL":"011465724","CDCOMISA":"MFB3"}},"createdAt":"2019-03-22T13:59:32.074Z","updatedAt":"2019-03-22T13:59:34.795Z","testTransaction":true}}');
         }
       
  
        res.setStatusCode(200);
        return res;
    }
}